{"version":3,"sources":["services/persons.js","components/Person.js","App.js","index.js"],"names":["baseUrl","persons","getAll","axios","get","then","response","data","create","newObject","post","remove","id","delete","concat","update","put","Person","_ref","person","App","react_default","a","createElement","name","number","onClick","removePerson","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","addPerson","event","preventDefault","personObject","state","newName","newNumber","filter","length","personService","newPerson","setState","message","setTimeout","window","confirm","find","p","changedPerson","catch","error","handleNameChange","target","value","handleNumberChange","handleFilterChange","_this2","App_Notification","App_FilterDisplayedNames","App_AddNewPerson","App_CreateNumbersTable","React","Component","AddNewPerson","onSubmit","onChange","type","FilterDisplayedNames","_ref2","CreateNumbersTable","_ref3","toUpperCase","includes","map","components_Person","key","Notification","_ref4","className","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.80661842.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, remove, update }","import React from 'react'\r\n\r\nconst Person = ({ person, App}) => {\r\n  return (\r\n      <tr>\r\n        <td>{person.name}</td>\r\n        <td>{person.number}</td>\r\n        <td><button onClick={App.removePerson(person.id)}>poista</button></td>\r\n      </tr>\r\n  )\r\n}\r\n\r\nexport default Person","import React from 'react';\r\nimport personService from './services/persons';\r\nimport Person from './components/Person';\r\nimport './index.css'\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      persons: [],\r\n      newName: '',\r\n      newNumber: '',\r\n      filter: '',\r\n      message: null\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    personService\r\n      .getAll()\r\n      .then(response => {\r\n        this.setState({ persons: response })\r\n      })\r\n  }\r\n\r\n  addPerson = (event) => {\r\n    event.preventDefault()\r\n    const personObject = {\r\n        name: this.state.newName,\r\n        number: this.state.newNumber\r\n    }\r\n\r\n      if (this.state.persons.filter(person => person.name === personObject.name).length === 0){\r\n    \r\n        personService\r\n          .create(personObject)\r\n          .then(newPerson => {\r\n            this.setState({\r\n              persons: this.state.persons.concat(newPerson),\r\n              newName: '',\r\n              newNumber: '',\r\n              message: `${personObject.name} on lisätty puhelinluetteloon.`\r\n            })\r\n            setTimeout(() => {\r\n              this.setState({message: null})\r\n            }, 3000)\r\n          })\r\n      }\r\n      \r\n      else {\r\n        if (window.confirm(personObject.name + ' löytyy jo puhelinluettelosta. Korvataanko vanha numero?')){\r\n          const id = this.state.persons.find(p => p.name === personObject.name).id\r\n          personService\r\n            .update(id, personObject)\r\n            .then(changedPerson => {\r\n              const persons = this.state.persons.filter(p => p.id !== id)\r\n              this.setState({\r\n                persons: persons.concat(changedPerson),\r\n                newName: '',\r\n                newNumber: '',\r\n                message: `Henkilön ${personObject.name} puhelinnumero on nyt päivitetty.`\r\n              })\r\n              setTimeout(() => {\r\n                this.setState({message: null})\r\n              }, 3000)\r\n            })\r\n            .catch(error => {\r\n              this.setState({\r\n                persons: this.state.persons.filter(p => p.id !== id),\r\n                newName: '',\r\n                newNumber: ''\r\n              })\r\n              if (window.confirm(`${personObject.name} on jo valitettavasti poistettu palvelimelta. Luodaanko uusi yhteystieto?`)){\r\n                personService\r\n                  .create(personObject)\r\n                  .then(newPerson => {\r\n                    this.setState({\r\n                      persons: this.state.persons.concat(newPerson),\r\n                      newName: '',\r\n                      newNumber: '',\r\n                      message: `${personObject.name} on lisätty puhelinluetteloon.`\r\n                    })\r\n                    setTimeout(() => {\r\n                      this.setState({message: null})\r\n                    }, 3000)\r\n                  })\r\n              }\r\n            })\r\n        } else {\r\n          this.setState({\r\n            newName: '',\r\n            newNumber: ''\r\n          })\r\n        }\r\n      }\r\n  }\r\n\r\n  removePerson = (id) => () => {\r\n    const p = this.state.persons.find(p => p.id === id)\r\n    if (window.confirm(`Poistetaanko ${p.name} puhelinluettelosta?`)){\r\n      personService\r\n        .remove(id)\r\n        .then(response => {\r\n          this.setState({\r\n            persons: this.state.persons.filter(p => p.id !== id),\r\n            message: `${p.name} on poistettu puhelinluettelosta.`\r\n          })\r\n          setTimeout(() => {\r\n            this.setState({message: null})\r\n          }, 3000)\r\n        })\r\n    }\r\n  }\r\n\r\n  handleNameChange = (event) => {\r\n    this.setState({ newName: event.target.value })\r\n  }\r\n\r\n  handleNumberChange = (event) => {\r\n    this.setState({ newNumber: event.target.value })\r\n  }\r\n\r\n  handleFilterChange = (event) => {\r\n    this.setState({ filter: event.target.value })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h1>Puhelinluettelo</h1>\r\n\r\n        <Notification message={this.state.message}/>\r\n\r\n        <FilterDisplayedNames App={this} />\r\n\r\n        <h2>Lisää uusi</h2>\r\n        <AddNewPerson App={this} />\r\n\r\n        <h2>Numerot</h2>\r\n        <CreateNumbersTable App={this} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst AddNewPerson = ({App}) => {\r\n  return (\r\n    <form onSubmit={App.addPerson}>\r\n      <div>\r\n        nimi:\r\n          <input\r\n            value={App.state.newName} \r\n            onChange={App.handleNameChange}\r\n          />\r\n      </div>\r\n      <div>\r\n        numero:\r\n          <input\r\n            value={App.state.newNumber} \r\n            onChange={App.handleNumberChange}\r\n          />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">lisää</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nconst FilterDisplayedNames = ({App}) => {\r\n  return (\r\n    <div>\r\n      rajaa näytettäviä:\r\n        <input \r\n          value={App.state.filter} \r\n          onChange={App.handleFilterChange}\r\n        />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst CreateNumbersTable = ({App}) => {\r\n  return (\r\n    <table>\r\n      <tbody>\r\n        {App.state.persons\r\n          .filter(person => person.name.toUpperCase().includes(App.state.filter.toUpperCase()))\r\n          .map(person =>\r\n            <Person \r\n              key={person.name}\r\n              person={person}\r\n              App={App}\r\n            />\r\n          )\r\n        }\r\n      </tbody>\r\n    </table>\r\n  )\r\n}\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n  return (\r\n    <div className=\"notification\">\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports=n(42)},40:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(10),o=n.n(u),l=n(11),s=n(12),i=n(14),c=n(13),m=n(15),p=n(2),f=n.n(p),d="/api/persons",h={getAll:function(){return f.a.get(d).then(function(e){return e.data})},create:function(e){return f.a.post(d,e).then(function(e){return e.data})},remove:function(e){return f.a.delete("".concat(d,"/").concat(e)).then(function(e){return e.data})},update:function(e,t){return f.a.put("".concat(d,"/").concat(e),t).then(function(e){return e.data})}},v=function(e){var t=e.person,n=e.App;return r.a.createElement("tr",null,r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:n.removePerson(t.id)},"poista")))},w=(n(40),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(i.a)(this,Object(c.a)(t).call(this,e))).addPerson=function(e){e.preventDefault();var t={name:n.state.newName,number:n.state.newNumber};if(0===n.state.persons.filter(function(e){return e.name===t.name}).length)h.create(t).then(function(e){n.setState({persons:n.state.persons.concat(e),newName:"",newNumber:"",message:"".concat(t.name," on lis\xe4tty puhelinluetteloon.")}),setTimeout(function(){n.setState({message:null})},3e3)});else if(window.confirm(t.name+" l\xf6ytyy jo puhelinluettelosta. Korvataanko vanha numero?")){var a=n.state.persons.find(function(e){return e.name===t.name}).id;h.update(a,t).then(function(e){var r=n.state.persons.filter(function(e){return e.id!==a});n.setState({persons:r.concat(e),newName:"",newNumber:"",message:"Henkil\xf6n ".concat(t.name," puhelinnumero on nyt p\xe4ivitetty.")}),setTimeout(function(){n.setState({message:null})},3e3)}).catch(function(e){n.setState({persons:n.state.persons.filter(function(e){return e.id!==a}),newName:"",newNumber:""}),window.confirm("".concat(t.name," on jo valitettavasti poistettu palvelimelta. Luodaanko uusi yhteystieto?"))&&h.create(t).then(function(e){n.setState({persons:n.state.persons.concat(e),newName:"",newNumber:"",message:"".concat(t.name," on lis\xe4tty puhelinluetteloon.")}),setTimeout(function(){n.setState({message:null})},3e3)})})}else n.setState({newName:"",newNumber:""})},n.removePerson=function(e){return function(){var t=n.state.persons.find(function(t){return t.id===e});window.confirm("Poistetaanko ".concat(t.name," puhelinluettelosta?"))&&h.remove(e).then(function(a){n.setState({persons:n.state.persons.filter(function(t){return t.id!==e}),message:"".concat(t.name," on poistettu puhelinluettelosta.")}),setTimeout(function(){n.setState({message:null})},3e3)})}},n.handleNameChange=function(e){n.setState({newName:e.target.value})},n.handleNumberChange=function(e){n.setState({newNumber:e.target.value})},n.handleFilterChange=function(e){n.setState({filter:e.target.value})},n.state={persons:[],newName:"",newNumber:"",filter:"",message:null},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;h.getAll().then(function(t){e.setState({persons:t})})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Puhelinluettelo"),r.a.createElement(N,{message:this.state.message}),r.a.createElement(E,{App:this}),r.a.createElement("h2",null,"Lis\xe4\xe4 uusi"),r.a.createElement(g,{App:this}),r.a.createElement("h2",null,"Numerot"),r.a.createElement(b,{App:this}))}}]),t}(r.a.Component)),g=function(e){var t=e.App;return r.a.createElement("form",{onSubmit:t.addPerson},r.a.createElement("div",null,"nimi:",r.a.createElement("input",{value:t.state.newName,onChange:t.handleNameChange})),r.a.createElement("div",null,"numero:",r.a.createElement("input",{value:t.state.newNumber,onChange:t.handleNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"lis\xe4\xe4")))},E=function(e){var t=e.App;return r.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4:",r.a.createElement("input",{value:t.state.filter,onChange:t.handleFilterChange}))},b=function(e){var t=e.App;return r.a.createElement("table",null,r.a.createElement("tbody",null,t.state.persons.filter(function(e){return e.name.toUpperCase().includes(t.state.filter.toUpperCase())}).map(function(e){return r.a.createElement(v,{key:e.name,person:e,App:t})})))},N=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"notification"},t)},y=w;o.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[16,2,1]]]);
//# sourceMappingURL=main.80661842.chunk.js.map